# レベル1: 基本チュートリアル（30分コース）

## 🎯 目標
このチュートリアルでは、LoRAファインチューニングプラットフォームの基本的な操作を学び、最初のファインチューニングモデルを作成します。

**所要時間**: 約30分  
**前提知識**: 特に必要なし  
**学習内容**: データセットアップロード、基本設定、簡単な訓練実行

---

## 📋 事前準備

### ✅ 1. システム起動確認
まず、すべてのサービスが正常に動作していることを確認します。

```bash
# Dockerコンテナの状態確認
docker-compose ps
```

以下のような出力が表示されることを確認してください：
```
NAME               STATUS              PORTS
llmlora-backend    Up XX seconds       0.0.0.0:8000->8000/tcp
llmlora-frontend   Up XX seconds       0.0.0.0:3000->3000/tcp
llmlora-ollama     Up XX seconds       0.0.0.0:11434->11434/tcp
llmlora-postgres   Up XX seconds       0.0.0.0:5432->5432/tcp
```

### ✅ 2. Webアプリケーションにアクセス
ブラウザで以下のURLにアクセスしてください：
- **メインアプリケーション**: http://localhost:3000
- **API文書** (確認用): http://localhost:8000/docs

### ✅ 3. モデルの準備
Ollamaに基本的なモデルをダウンロードします：

```bash
# 小さなモデルをダウンロード（初回のみ）
docker exec llmlora-ollama ollama pull llama2:7b
```

---

## 🚀 ステップ1: 最初のデータセットをアップロード

### 1.1 データセットタブに移動
1. ブラウザでhttp://localhost:3000にアクセス
2. 上部ナビゲーションの **「データセット」** タブをクリック

### 1.2 サンプルデータセットをダウンロード
このチュートリアル用のサンプルデータセットを準備しました：

```json
[
  {
    "instruction": "富士山の高さは何メートルですか？",
    "output": "富士山の高さは3,776メートルです。日本で最も高い山として知られています。"
  },
  {
    "instruction": "日本の首都はどこですか？",
    "output": "日本の首都は東京です。政治、経済、文化の中心地として機能しています。"
  },
  {
    "instruction": "寿司の主な材料は何ですか？",
    "output": "寿司の主な材料は酢飯、新鮮な魚介類、海苔です。醤油やわさびと一緒に食べることが多いです。"
  },
  {
    "instruction": "桜が咲く季節はいつですか？",
    "output": "桜は主に春（3月下旬から5月上旬）に咲きます。地域によって開花時期が異なります。"
  },
  {
    "instruction": "日本の伝統的な衣装は何ですか？",
    "output": "日本の伝統的な衣装は着物です。特別な行事や式典で着用されることが多いです。"
  }
]
```

上記のJSONデータをテキストファイルとして保存してください（例：`basic_qa.json`）。

### 1.3 データセットアップロード
1. **「データセットをアップロード」** ボタンをクリック
2. アップロードフォームで以下を入力：
   - **ファイル**: 保存した `basic_qa.json` を選択
   - **名前**: "基本的な日本語Q&A"
   - **説明**: "チュートリアル用の基本的な質問応答データ"
   - **タイプ**: "指示" を選択
3. **「アップロード」** ボタンをクリック

### 1.4 アップロード結果確認
- データセットが正常にアップロードされると、一覧に表示されます
- **タイプ**: 指示、**サイズ**: 5 例 と表示されることを確認

---

## ⚙️ ステップ2: 訓練ジョブを作成

### 2.1 訓練タブに移動
1. 上部ナビゲーションの **「訓練」** タブをクリック
2. **「新しい訓練ジョブ」** ボタンをクリック

### 2.2 基本情報を入力
**訓練ジョブを作成** フォームで以下を入力：
- **ジョブ名**: "私の最初のLoRA訓練"
- **ベースモデル**: "llama2:7b" を選択
- **訓練データセット**: "基本的な日本語Q&A (5 例)" を選択

### 2.3 LoRA設定（保守的設定を使用）
LoRA設定セクションで：
1. **「クイックプリセット」** の **「保守的 (r=4)」** をクリック
2. 設定が以下のように変更されることを確認：
   - ランク: 4
   - アルファ: 8
   - ドロップアウト: 0.10
   - 対象モジュール: q_proj, v_proj

**💡 なぜ保守的設定？**
- 小さなデータセット（5例）では過学習を避けるため
- 少ないパラメータで高速な訓練が可能
- 初回体験には最適な設定

### 2.4 訓練設定（高速テストを使用）
訓練設定セクションで：
1. **「クイックプリセット」** の **「高速テスト」** をクリック
2. 設定が以下のように変更されることを確認：
   - 学習率: 0.00005
   - エポック数: 1
   - バッチサイズ: 2
   - 最大長: 512

**💡 なぜ高速テスト設定？**
- 1エポックで短時間での完了
- 初回体験では結果を素早く確認
- システムの動作確認に最適

---

## 🏃 ステップ3: 訓練を開始

### 3.1 訓練ジョブの開始
1. すべての設定を確認
2. **「訓練を開始」** ボタンをクリック
3. "ジョブ作成中..." と表示された後、ジョブ一覧に移動

### 3.2 進捗の監視
**期待される動作**:
1. ジョブステータスが "PENDING" → "RUNNING" に変化
2. 進捗バーが 0% から徐々に増加
3. 現在のエポック、損失値がリアルタイムで更新

**⏱️ 予想実行時間**: 約3-7分（MacBook Air M4の場合）

### 3.3 完了確認
訓練が完了すると：
- ステータスが "COMPLETED" に変化
- 進捗が 100% に到達
- 完了時刻が表示

---

## 🔍 ステップ4: 結果の確認

### 4.1 詳細画面で結果確認
1. 完了したジョブの **「詳細を表示」** ボタンをクリック
2. 以下の情報を確認：
   - **最終損失値**: 数値が下がっていることを確認
   - **訓練時間**: 実際にかかった時間
   - **設定サマリー**: 使用した設定の確認

### 4.2 訓練メトリクスの確認
**訓練損失グラフ**で：
- 損失が下降傾向にあることを確認
- 急激な変化がないことを確認（安定した学習）

---

## 🎉 完了！次のステップ

### ✅ 学習内容の確認
このチュートリアルで学んだこと：
- [x] データセットのアップロード方法
- [x] LoRAパラメータの基本概念
- [x] 訓練ジョブの作成と実行
- [x] 進捗監視とリアルタイム更新
- [x] 結果の確認方法

### 🎯 次のレベルへ
基本操作をマスターしました！次は：
- **レベル2（実用チュートリアル）**: より大きなデータセットでの実践的なファインチューニング
- **レベル3（高度なチュートリアル）**: 専門分野でのカスタマイズと最適化

---

## 🚨 よくある問題と対処法

### Q1: モデルが見つからない
**症状**: ベースモデル選択でモデルが表示されない  
**対処法**: 
```bash
docker exec llmlora-ollama ollama list
docker exec llmlora-ollama ollama pull llama2:7b
```

### Q2: 訓練が開始されない
**症状**: ステータスが "PENDING" から変わらない  
**対処法**: 
- バックエンドログの確認: `docker logs llmlora-backend`
- ページを再読み込みして再確認

### Q3: 訓練が失敗する
**症状**: ステータスが "FAILED" になる  
**対処法**: 
- エラーメッセージを確認
- データセット形式の再確認
- より小さなバッチサイズを試す

### Q4: メモリ不足エラー
**症状**: Out of memory エラー  
**対処法**: 
- バッチサイズを 1 に減らす
- 最大長を 256 に減らす
- Dockerのメモリ制限を確認

---

## 📚 参考資料

### LoRAについて学ぶ
- [LoRA論文（原文）](https://arxiv.org/abs/2106.09685)
- [LoRAの基本概念解説](../concepts/lora_basics.md)

### パラメータチューニング
- [LoRAパラメータガイド](../concepts/lora_parameters.md)
- [訓練設定のベストプラクティス](../concepts/training_best_practices.md)

---

**🎊 おめでとうございます！**  
最初のLoRAファインチューニングが完了しました。次のレベルでより実践的なスキルを身につけましょう！